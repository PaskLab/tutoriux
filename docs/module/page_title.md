Page Title
=========================

The page title has it's own component and follow a set of rules that could be complex at first glance.

We'll go step by step to draw the full picture.

### The story begin in the layout..!

    <!DOCTYPE html>
    
    <!-- BEGIN HEAD -->
    <head>
    	<meta charset="utf-8">
            <title>
                {% block title %}
                {{ render(controller('App\\Controller\\Site\\NavigationController::pageTitle')) }}
                {% endblock %}
            </title>
        
        //...
        
There's some options for your right here:

- You can override the title in any twig template that extend the main layout.
- You can extend the current generated title block content with `{{ parent() }}` in a sub-template.
- You can tweak the tile by using the controller mechanism describe in the next section.

### The navigation controller

The NavigationController::pageTitle method called by default in the main layout use to services:

- **PageTitle**: A service that is filled along with the breadcrumbs by the `ApplicationCore` service.
- **MetadatableGetter**: A service from the DoctrineBehaviors package that allow us to safely get the Metadata
of a navigation element that implement the `Metadatable` behavior.

The controller will decide from which service it will pull the title depending on the Metadata that are set:

- The *metadata* contain a `metaTitle` and an `metaTitleOverride` field. (and others fields that don't applies here)
- The `metaTitle` field will be used to replace the default section name, for the html document header `<metadata>`,
but can also be used alone without the breadcrumbs path as the main document title if the `metaTitleOverride` field
is set to `True`.

Otherwise, the page tile will be generated by the `PageTitle` service. It will contain all the breadcrumbs elements,
but in a reversed order. This will display the current section name first, followed by the parents section path taken.

### The page_title template

The template is not that nice to look at... You can look a it bellow:

    {% trans_default_domain "site" %}
    {% block title -%}
    	{%- if element_page_title is defined and element_override_page_title is defined and element_override_page_title -%}
    		{{ element_page_title|trans }}
    	{%- else -%}
    		{%- if element_page_title is defined and element_page_title -%}
    			{{ element_page_title }} - {% endif -%}
    		{%- for element in elements -%}
    			{% set entityTitle = element|transTitle|striptags|truncate(100)|raw %}
    			{%- if (element.id is defined and element.id is null) or element.id is not defined -%}
    				{% set entityTitle = entityTitle|trans %}
    			{%- elseif element.metaTitle is defined and element.metaTitle is not empty -%}
    				{% set entityTitle = element.metaTitle|trans %}
    			{%- endif -%}
    			{{ entityTitle }} - {% endfor -%}
    		{{ project_title|trans }}
    	{%- endif %}
    {%- endblock -%}
    
So, here a short summary of the key elements:

- If the title is defined and set to override, display only the page title found in the metadata field.
- If a title is defined, use it instead of the section name.
- If no title is defined, use the section name, followed by it's parents sections.
- A title is limited to **100 characters**.
- Some filters are applied to get the right translation or fallback on other languages.
- It all end by the global twig parameter `project_title` defined in the project configuration.
    

